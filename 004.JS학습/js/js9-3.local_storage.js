// JS9-3. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ JS

// ë‚˜ì˜ í•¨ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸°
import myFn from "./my_function.js";

/*************************************************************** 
    [ JS ë¡œì»¬ìŠ¤í† ë¦¬ì§€ : localStorage ]
    - windowí•˜ìœ„ê°ì²´ window.localStorage
    -> windowëŠ” ì£¼ë¡œ ìƒëµí•¨!
    -> ê°œë°œì ëª¨ë“œ 'Application' íƒ­ì—ì„œ í™•ì¸ê°€ëŠ¥!!

    1. ì •ì˜ : 
        ë¸Œë¼ìš°ì €ë³„ ë¡œì»¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì˜ì—­ì— ì €ì¥ë˜ëŠ” 
        ìŠ¤íŠ¸ë§ë°ì´í„° ì €ì¥ì†Œ(JS API)
    2. ìœ ì§€ : ê°™ì€ PC, ê°™ì€ ë¸Œë¼ìš°ì €(ì¬ì„¤ì¹˜ì—†ì´ì‚¬ìš©) ì¼ ê²½ìš° ê³„ì†ìœ ì§€ë¨
        (ë‹¨, ê°™ì€íŒŒì¼ì¼ ì§€ë¼ë„ ì—¬ëŠ” ê²½ë¡œì— ë”°ë¼ ê°™ì€ ë³€ìˆ˜ë„
        ë”°ë¡œ ê´€ë¦¬ëœë‹¤! - ê¸°ì¤€ì´ ë„ë©”ì¸ê²½ë¡œ/ì£¼ì†Œ)
    3. íŠ¹ì§• : ëª¨ë“œ ë°ì´í„°ëŠ” í‚¤,ê°’ ìŒìœ¼ë¡œ êµ¬ì„±ë˜ë©° 
        ë°ì´í„°ê°’ì€ ë°˜ë“œì‹œ ë¬¸ìí˜•ìœ¼ë¡œ ì‚¬ìš©ë¨
    4. ì‘ìš© : ë°ì´í„°ë¡œ ë°°ì—´/ê°ì²´ë¥¼ ì‚¬ìš©í•  ê²½ìš° ë¬¸ìí˜• ë³€í™˜í•˜ì—¬ ë„£ê³ 
                ë‹¤ì‹œ ê°ì²´í˜•ìœ¼ë¡œ íŒŒì‹±í•˜ì—¬ ì‚¬ìš©í•œë‹¤!
            (1) ì…ë ¥ì‹œ : JSON.stringify(ë°°ì—´/ê°ì²´)
            (2) ì‚¬ìš©ì‹œ : JSON.parse(ë¬¸ìí˜•ë°°ì—´/ê°ì²´)
            -> JSì˜ ì œì´ìŠ¨ ë°ì´í„° íŒŒì‹± ë©”ì„œë“œ : 
                JSON.parse()
            -> JSì˜ ì œì´ìŠ¨ í˜•ì‹ ë°ì´í„°ë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ëŠ” ë©”ì„œë“œ:   
                JSON.stringify()
    5. ì‚¬ìš©ë©”ì„œë“œ : 
        (1) ê°’ì„¤ì • : setItem(í‚¤ëª…,ê°’)
        (2) ê°’ì½ê¸° : getItem(í‚¤ëª…)
        (3) ì „ì²´ì§€ìš°ê¸° : clear()
        (4) í‚¤ë²ˆí˜¸ì½ê¸° : key(ìˆœë²ˆ) -> 0ë¶€í„° (í‚¤ì´ë¦„ë¦¬í„´)
        (5) ê°œë³„í•­ëª©ì‚­ì œ : removeItem(í‚¤ëª…)
        (6) ê°œìˆ˜ : length

    [ JS ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ : sessionStorage ]
    -> ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì™€ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ì˜ ë©”ì„œë“œëŠ” ë™ì¼í•¨!
    -> ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì™€ ì°¨ì´ì ì€?
    -> ë¸Œë¼ìš°ì €ê°€ ë‹«íˆë©´ ë°ì´í„°ê°€ ì‚¬ë¼ì§„ë‹¤!
    (ë¡œì»¬ì„¸ì…˜ì˜ ê°œë…ì€ ì„œë²„ì„¸ì…˜ê³¼ ë‹¬ë¦¬ í•˜ë‚˜ì˜ ë¸Œë¼ìš°ì €íƒ­ì„
    ë‹¨ìœ„ë¡œ í•œë‹¤!)
    -> ì„œë²„ì„¸ì…˜ì€ ì ‘ì†ëœ ë¡œê·¸ì¸ì •ë³´ì„¸ì…˜ì„ ì„œë²„ì—ì„œ ê´€ë¦¬í•˜ëŠ” ë‹¨ìœ„ì„

    [ JS ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ / ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ ì¥ë‹¨ì  ]
    (1) ì¥ì : 
        ê°„ë‹¨í•œ í”„ë¡ íŠ¸ì—”ë“œ ë°ì´í„°ë¥¼ DBì—†ì´ í…ŒìŠ¤íŠ¸í•´ë³´ëŠ”ë° íƒì›”í•¨
        ì¿ í‚¤ì™€ ê°™ì´ ì‚¬ìš©ì ë™ì˜ë¥¼ í•„ìš”ë¡œí•˜ëŠ” ë¡œì»¬ ê¸°ë¡ìˆ˜ë‹¨ì˜ ë‹¨ì ì€
        ì´ê²ƒì„ ê±°ë¶€í•˜ë©´ ì“¸ ìˆ˜ ì—†ëŠ”ë° JS ìŠ¤í† ë¦¬ì§€ëŠ” ì´ëŸ° ì œì•½ì´
        ì—†ë‹¤! ë³´ì•ˆìƒ ì•ˆì „ì´ ë³´ì¥ë˜ë¯€ë¡œ ì‚¬ìš©ê°€ëŠ¥í•¨!
    (2) ë‹¨ì : ë°ì´í„°ì˜ ì§€ì† ë³´ì¥ì´ ì—†ë‹¤!
        (ê·¸ë‚˜ë§ˆ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ëŠ” ë¸Œë¼ìš°ì € ê²½ë¡œê°€ ê°™ê³  PCê°€ ê°™ê³ 
        ë¸Œë¼ìš°ì €ì¢…ë¥˜ê°€ ê°™ë‹¤ë©´ ì§€ìš°ê¸° ì „ê¹Œì§€ëŠ” ë°ì´í„°ë¥¼ ìœ ì§€í•œë‹¤!)


    -> w3 schools ì°¸ê³ 
    https://www.w3schools.com/js/js_api_web_storage.asp
***************************************************************/

// ë¡œì»¬ìŠ¤í† ë¦¬ì§€ í…ŒìŠ¤íŠ¸
// localStorage.setItem('my-name','í†°ì†Œì—¬');
// localStorage.setItem('your-name','ì œì´ìŠ¨');
// console.log(localStorage.getItem('my-name'));
// console.log(localStorage.getItem('your-name'));
// myFn.qs('body').onclick =
// ()=>{localStorage.clear()};
// myFn.qs('body').onclick =
// ()=>{localStorage.removeItem('your-name')};

// ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ í…ŒìŠ¤íŠ¸
// sessionStorage.setItem('my-dog','í¬ë©”ë¼ë‹ˆì•ˆ');
// sessionStorage.setItem('your-dog','ìš”í‚¤');
// console.log(sessionStorage.getItem('my-dog'));
// console.log(sessionStorage.getItem('your-dog'));
// myFn.qs('body').onclick =
// ()=>{sessionStorage.clear()};
// myFn.qs('body').onclick =
// ()=>{sessionStorage.removeItem('my-dog')};

// [ 1. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì—°ìŠµ ] ////////////////////
// 1. ë²„íŠ¼ ê¸°ëŠ¥ ì´ë²¤íŠ¸ ëŒ€ìƒ : .local-box button
const btnLocal = myFn.qsa(".local-box button");

// -> ì¶”ê°€ëŒ€ìƒ : ìˆ˜ì •í•˜ê¸° ì„ íƒë°•ìŠ¤ìš”ì†Œ - select#sel
const selBox = myFn.qs('select#sel');

// -> ì¶”ê°€ëŒ€ìƒ : ìˆ˜ì •í•­ëª© ì œëª© / ë‚´ìš©
const tit2 = myFn.qs('#tit2');
const cont2 = myFn.qs('#cont2');

console.log("ëŒ€ìƒ:", btnLocal, selBox, tit2, cont2);

// 2. ë²„íŠ¼ì— ì´ë²¤íŠ¸ ì„¤ì •í•˜ê¸°
btnLocal.forEach((ele) => myFn.addEvt(ele, "click", localsFn));

// 3. ë¡œì»¬ì“° ì²˜ë¦¬ í•¨ìˆ˜ ë§Œë“¤ê¸° ///////
function localsFn() {
  // 1. ë²„íŠ¼ í…ìŠ¤íŠ¸ ì½ê¸°
  let btxt = this.innerText;
  console.log("ë¡œì»¬ì“°~!", btxt);

  // 2. ë²„íŠ¼ë³„ ê¸°ëŠ¥ ë¶„ê¸°í•˜ê¸° //////
  if (btxt == "ì²˜ìŒ") {
    // (1) ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì…‹íŒ…í•˜ê¸°
    // -> localStorage.setItem(í‚¤,ê°’)
    localStorage.setItem("actor-name", "ì´ì •ì¬");
    localStorage.setItem("actor-role", "ë°•í‰í˜¸ì—­");
    localStorage.setItem(
      "actor-cat",
      "ì¡°ì§ë‚´ ìŠ¤íŒŒì´ë¥¼ ìƒ‰ì¶œí•˜ëŠ” í•´ì™¸íŒ€ ì•ˆê¸°ë¶€ì¥"
    );
  } /// if ////
  else if (btxt == "ë³´ì—¬ì¤˜") {
    // ë°°ìš°ì´ë¦„ ì¶œë ¥
    myFn.qs(".local .nm").innerText = localStorage.getItem("actor-name");
    // ì—­í• ì´ë¦„ ì¶œë ¥
    myFn.qs(".local .role").innerText = localStorage.getItem("actor-role");
    // ìºë¦­í„°ì†Œê°œ ì¶œë ¥
    myFn.qs(".local .cat").innerText = localStorage.getItem("actor-cat");
  } /// else if ////
  else if (btxt == "ì „ì²´ì‚­ì œ") {
    // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì „ì²´ ì‚­ì œ
    // í•´ë‹¹ url ìŠ¤í† ë¦¬ì§€ë§Œ ëŒ€ìƒìœ¼ë¡œ ëª¨ë‘ ì§€ì›€
    localStorage.clear();

    // ê°œë³„ì‚­ì œëŠ” removeItem(í‚¤)
    // localStorage.removeItem("actor-name");
  } //// else if ////
  else if (btxt == "ì²˜ë¦¬") {
    // ë°°ì—´/ê°ì²´ ë§Œë“¤ê¸°
    // 1. ë¡œì»¬ì“°ì— "minfo"í‚¤ê°€ ì—†ìœ¼ë©´ ìƒˆë¡œë§Œë“¤ê¸°
    // ë§Œì•½ í‚¤ê°€ ì—†ìœ¼ë©´ nullê°’ì„ ë¦¬í„´í•¨
    // ì´ê²ƒì€ ifë¬¸ì—ì„œ falseì²˜ë¦¬ë¨!
    // falseì¼ë•Œ ì²˜ë¦¬í•´ì•¼í•˜ë¯€ë¡œ NOT(!)ì—°ì‚°ìì‚¬ìš©
    // ë˜ëŠ” ë¹ˆ ë°°ì—´ê°’ì¼ ê²½ìš°ë„ ìƒì„±í•¨ìˆ˜í˜¸ì¶œ ì²˜ë¦¬
    // if (
    //   !localStorage.getItem("minfo") ||
    //   localStorage.getItem("minfo") == "[]"
    // ) {
    //   // ìµœì´ˆ ê°ì²´ë°ì´í„° ë§Œë“¤ê¸° í•¨ìˆ˜ í˜¸ì¶œ
    //   makeObj();
    // } /// if ///
    // console.log(localStorage.getItem("minfo"));
    // // 2. í™”ë©´ì— ì¶œë ¥í•˜ê¸° : ë°ì´í„° ë°”ì¸ë”©í•˜ê¸°
    // bindData();
  } //// else if ////
} /////////// localsFn //////////

// ì¶”ê°€ë¡œ ê° ì¶œë ¥ ì˜ì—­ì„ í´ë¦­í•˜ë©´ í•´ë‹¹ ë¡œì»¬ì“°ë§Œ ì§€ìš°ê¸°ì…‹íŒ…
// ë°°ìš°ì´ë¦„ ì‚­ì œ
myFn.qs(".local .nm").onclick = () => localStorage.removeItem("actor-name");

// ì—­í• ì´ë¦„ ì‚­ì œ
myFn.qs(".local .role").onclick = () => localStorage.removeItem("actor-role");

// ìºë¦­í„°ì†Œê°œ ì‚­ì œ
myFn.qs(".local .cat").onclick = () => localStorage.removeItem("actor-cat");

// "minfo" ë¡œì»¬ì“° í‚¤ê°€ ì—†ìœ¼ë©´ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ë„£ê¸° í•¨ìˆ˜ //
function makeObj() {
  console.log("minfoë§Œë“¤ê¸°!");

  // 1. ê²Œì‹œíŒ í˜•ì‹ì˜ ê°ì²´ ìƒì„±í•˜ê¸° ///
  // ë°°ì—´ì•ˆì— ê°ì²´ë°ì´í„° í•œê°œ ë„£ê¸° [{},]
  let obj = [
    {
      idx: 1,
      tit: "ë‚´ê°€ ì™•ì´ë  ìƒì¸ê°€?",
      cont: "ì´ì •ì¬í˜•ë‹˜ì€ ì§„ì •í•œ ì™•ì´ì‹­ë‹ˆë‹¤!",
    },
  ];
  // 2. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ë°°ì—´/ê°ì²´ë°ì´í„° ë„£ê¸°
  // ë§Œì•½ ë°°ì—´ë°ì´í„°ë¥¼ ì§ì ‘ ë„£ìœ¼ë ¤ê³ í•˜ë©´
  // ë¡œì»¬ì“°ëŠ” ë¬¸ìí˜•ë§Œ ë°›ê¸°ë•Œë¬¸ì— ë°ì´í„°í˜•ì´ë¦„ë§Œ
  // ë¬¸ìí˜•ìœ¼ë¡œ ë°ì´í„°ë¥¼ ëŒ€ì‹  ë„£ê²Œëœë‹¤!
  // ì¦‰, ë°°ì—´ë°ì´í„°ëŠ” ëª»ë“¤ì–´ê°„ë‹¤! ã… .ã… 
  // ê·¸ëŸ¬ë¯€ë¡œ ë°°ì—´ë°ì´í„°ëŠ” ë¬¸ìí˜•ìœ¼ë¡œ ë³€í™˜í•˜ì—¬
  // ë„£ì–´ì•¼ ë¡œì»¬ì“°ì— ë“¤ì–´ê°„ë‹¤!
  // -> JSON.stringify(ë°°ì—´/ê°ì²´)
  localStorage.setItem("minfo", JSON.stringify(obj));
  // í™”ë©´ì— ê²Œì‹œíŒ ë°”ì¸ë”©í•˜ê¸°
  bindData();
} ///////// makeObj //////

//// í™”ë©´ì— ê²Œì‹œíŒì„ ë¿Œë ¤ì£¼ëŠ” ë°”ì¸ë”©í•¨ìˆ˜ ///////
function bindData() {
  // 1. ë¡œì»¬ì“° ë°ì´í„° ì½ì–´ì˜¤ê¸° : minfo -> ë¬¸ìí˜•ë°ì´í„°ì„!
  let localData = localStorage.getItem("minfo");
  console.log("ë¡œì»¬ì“° íŒŒì‹±ì „!", localData);

  // 2. ë¡œì»¬ì“° ë°ì´í„° íŒŒì‹±í•˜ê¸° : JSON.parse() -> ë°°ì—´ê°ì²´!
  localData = JSON.parse(localData);
  console.log("ë¡œì»¬ì“° íŒŒì‹±í›„!", localData);

  // ì¶œë ¥ëŒ€ìƒ : .board
  // 3. í™”ë©´ì— ì¶œë ¥í•˜ê¸° ////////
  myFn.qs(".board").innerHTML = `
    <table>
        <tr>
            <th>ë²ˆí˜¸</th>
            <th>ì œëª©</th>
            <th>ë‚´ìš©</th>
            <th>ì‚­ì œ</th>
        </tr>
        <!-- ë°ì´í„°ì— ë”°ë¥¸ ë°˜ë³µë°”ì¸ë”© -->
        ${localData
          .map(
            (v, i) => `
            <tr>
                <td>${v.idx}</td>
                <td>${v.tit}</td>
                <td>${v.cont}</td>
                <td class="del-link">
                    <a href="#" data-idx="${i}">Ã—</a>
                </td>
            </tr>
        `
          )
          .join("")}
    </table>
`;

  // 4. ì‚­ì œë²„íŠ¼ ë§í¬í•¨ìˆ˜ í˜¸ì¶œ!
  setDelLink();

  // 5. ìˆ˜ì •ì„ ìœ„í•œ ì„ íƒë°•ìŠ¤ ë°”ì¸ë”©í•˜ê¸°!
  // ëŒ€ìƒ : #sel -> selBoxë³€ìˆ˜
  // ë°ì´í„° : íŒŒì‹±ëœ ë¡œì»¬ì“° (ë°°ì—´) ì¤‘ idxë§Œ ì‚¬ìš©!->map()
  selBox.innerHTML = 
  `<option value="sel">ì„ íƒí•˜ì„¸ìš”</option>`+
  localData.map(v=>
    `<option value="${v.idx+'ğŸ˜’'+v.tit+'ğŸ˜’'+v.cont}">${v.idx}</option>`
  ).join('');

} ////////////// bindData //////////////////

// ìˆ˜ì •í•­ëª© ì„ íƒë°•ìŠ¤ ë³€ê²½ ì‹œ í•¨ìˆ˜êµ¬í˜„//
myFn.addEvt(selBox,'change', function(){
  
  // ì½ì–´ì˜¨ valueê°’ì„ splitìœ¼ë¡œ ì˜ë¼ì„œ ë„£ê¸°
  let newVal = this.value.split('ğŸ˜’');
  
  console.log('ì„ íƒë³€ê²½:', this.value, newVal);

  // ìˆ˜ì •í•  ë°ì´í„°ì˜ ì›ë³¸ ì œëª©/ë‚´ìš© ë³´ì—¬ì£¼ê¸°
  tit2.value = newVal[1];
  cont2.value = newVal[2];
}); // change ì´ë²¤íŠ¸ í•¨ìˆ˜ //

/////////////////////////////////////////////////
////// [ ê²Œì‹œíŒ ìµœì´ˆí˜¸ì¶œ ë° ë°ì´í„° ì…‹ì—… ] //////////
//////////////////////////////////////////////////

// ê²Œì‹œíŒ ìµœì´ˆí˜¸ì¶œ : ë¡œì»¬ì“° minfo ì¡´ì¬ì—¬ë¶€ì— ë”°ë¼ì²˜ë¦¬
console.log("ìµœì´ˆminfoë¡œì»¬ì“°ê°€ ìˆëŠ”ê°€?", 
  localStorage.getItem("minfo"));
// ë§Œì•½ ê²°ê³¼ê°€ nullì´ë©´ ì´ ë¡œì»¬ì“°ëŠ” ì—†ëŠ”ê²ƒì„!
// ë”°ë¼ì„œ ifë¬¸ì˜ ì¡°ê±´ë¬¸ì— ì‚¬ìš©í•˜ë©´ ì½”ë“œë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤!

// ë§Œì•½ì— minfo ë¡œì»¬ì“°ê°€ ì¡´ì¬í•˜ë©´ bindData()í•¨ìˆ˜í˜¸ì¶œ!
if (localStorage.getItem("minfo")) bindData();
// ë§Œì•½ minfo ë¡œì»¬ì“°ê°€ ì—†ìœ¼ë©´ ìƒì„±í•˜ë¼!
else makeObj();

/////////////////////////////////////////////////
/// [ ë°ì´í„° ì¶”ê°€ ë²„íŠ¼ í´ë¦­ì‹œ ë°ì´í„° ì¶”ê°€í•˜ê¸° ] ////
/////////////////////////////////////////////////
// ëŒ€ìƒ : #sbtn (ì…ë ¥ë²„íŠ¼)
// ë°ì´í„° ì½ì–´ì˜¬ ëŒ€ìƒ : #tit, #cont
const tit = myFn.qs("#tit");
const cont = myFn.qs("#cont");

// ì´ë²¤íŠ¸ í•¨ìˆ˜ ì„¤ì •í•˜ê¸° /////
myFn.qs("#sbtn").onclick = () => {
  console.log("ì…ë ¥í•˜ë¼!", tit, cont);
  // 1. ì…ë ¥ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ : try ~ catchì‚¬ìš©!
  try {
    // trim() ì•ë’¤ê³µë°± ì œê±° ì²˜ë¦¬í•´ì•¼ ê³µë°±ë§Œ ë„£ê¸°ë§‰ìŒ!
    if (tit.value.trim() == "" || cont.value.trim() == "") {
      throw "ì œëª©ê³¼ ë‚´ìš©ì€ ë°˜ë“œì‹œ ì…ë ¥í•´ì•¼í•©ë‹ˆë‹¤!";
    }
  } catch (err) {
    /// try ////
    // catchë¬¸ì— ë“¤ì–´ì˜¨ ê²½ìš°ëŠ” ì—ëŸ¬ìƒí™©ì„!
    alert(err);
    // í•¨ìˆ˜ ì•„ë«ë¶€ë¶„ ì‹¤í–‰ ëª»í•˜ë„ë¡ ë¦¬í„´í•¨!
    return;
  } /// catch ///

  // ë¡œì»¬ì“° ì²˜ë¦¬í•¨ìˆ˜ í˜¸ì¶œ! : call() ëŒ€ë¦¬í˜¸ì¶œ
  setLS.call({ key: "minfo", opt: "add" });
}; ///////////// click ì´ë²¤íŠ¸ í•¨ìˆ˜ ///////////////

/////////////////////////////////////////////////
/// [ ë°ì´í„° ìˆ˜ì • ë²„íŠ¼ í´ë¦­ì‹œ ë°ì´í„° ìˆ˜ì •í•˜ê¸° ] ////
/////////////////////////////////////////////////
// ëŒ€ìƒ : #mobtn (ìˆ˜ì •ë²„íŠ¼)
// ë°ì´í„° ì½ì–´ì˜¬ ëŒ€ìƒ : #tit2, #cont2

// ì´ë²¤íŠ¸ í•¨ìˆ˜ ì„¤ì •í•˜ê¸° /////
myFn.qs("#mobtn").onclick = () => {
  console.log("ìˆ˜ì •í•˜ë¼!");
  // 1. ì…ë ¥ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ : try ~ catchì‚¬ìš©!
  try {
    // trim() ì•ë’¤ê³µë°± ì œê±° ì²˜ë¦¬í•´ì•¼ ê³µë°±ë§Œ ë„£ê¸°ë§‰ìŒ!
    if (tit2.value.trim() == "" || cont2.value.trim() == "") {
      throw "ì œëª©ê³¼ ë‚´ìš©ì€ ë°˜ë“œì‹œ ì…ë ¥í•´ì•¼í•©ë‹ˆë‹¤!";
    }
  } catch (err) {
    /// try ////
    // catchë¬¸ì— ë“¤ì–´ì˜¨ ê²½ìš°ëŠ” ì—ëŸ¬ìƒí™©ì„!
    alert(err);
    // í•¨ìˆ˜ ì•„ë«ë¶€ë¶„ ì‹¤í–‰ ëª»í•˜ë„ë¡ ë¦¬í„´í•¨!
    return;
  } /// catch ///

  // ë¡œì»¬ì“° ì²˜ë¦¬í•¨ìˆ˜ í˜¸ì¶œ! : call() ëŒ€ë¦¬í˜¸ì¶œ
  setLS.call({ 
    key: "minfo", 
    opt: "update", 
    upSeq: selBox.value.split('ğŸ˜³')[0]
    // ì§€ìš¸ ìˆœë²ˆì€ ì„ íƒë°•ìŠ¤ì˜ value ê°’ ì¤‘ ì˜ë¼ì„œ ì²«ë²ˆì§¸ ê°’
  });
}; ///////////// click ì´ë²¤íŠ¸ í•¨ìˆ˜ ///////////////

/////////////////////////////////////////////////
/// [ ë°ì´í„° ì‚­ì œ ë²„íŠ¼ í´ë¦­ì‹œ ë°ì´í„° ì‚­ì œí•˜ê¸° ] ////
/////////////////////////////////////////////////
// ëŒ€ìƒ : .del-link a (ì‚­ì œë²„íŠ¼)
// ì²˜ìŒ ë¡œë”©ì‹œ ì‚­ì œë²„íŠ¼ì— í´ë¦­ì´ë²¤íŠ¸ë¥¼ ì„¤ì •í•˜ê²Œ ë˜ë©´
// ì‚­ì œí›„ ë¦¬ìŠ¤íŠ¸ê°€ ë³€ê²½ë¨ì—ë”°ë¼ ê¸°ì¡´ì— ì„¤ì •ëœ ì´ë²¤íŠ¸ê°€ ì‚¬ë¼ì§!
// ->>> ((ì£¼ì˜!ì¤‘ìš”!!!)) ì¼ë°˜ì ìœ¼ë¡œ í˜•ì œìš”ì†Œì¤‘ DOMêµ¬ì¡°ê°€ ë³€ê²½ë ì‹œ
// ->>> ê¸°ì¡´ ì´ë²¤íŠ¸ê°€ ë¦¬ì…‹ë˜ëŠ”ê²ƒì´ ê¸°ë³¸ì„! ë”°ë¼ì„œ DOMì´ ë³€ê²½ë ë•Œ
// ->>> ê·¸ í˜•ì œìš”ì†Œì˜ ì´ë²¤íŠ¸ë¥¼ ë‹¤ì‹œ ì„¤ì •í•´ì•¼í•œë‹¤!
// ->>> ì´ëŸ° ì´ìœ ë¡œ ì•„ë˜ ì´ë²¤íŠ¸ì„¤ì • ì½”ë“œëŠ” í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤!

function setDelLink() {
  // ì‚­ì œì½”ë“œ aë§í¬ë¥¼ ìˆœíšŒí•˜ì—¬ ì´ë²¤íŠ¸ ë° ê¸°ëŠ¥ë„£ê¸°!
  myFn.qsa(".del-link a").forEach((el) => {
    myFn.addEvt(el, "click", function (e) {
      // aìš”ì†Œ ê¸°ë³¸ì´ë™ë§‰ê¸°
      e.preventDefault();

      // 1. ì§€ìš¸ìˆœë²ˆ ì½ì–´ì˜¤ê¸° : data-idxì†ì„±ê°’
      let delIdx = this.getAttribute("data-idx");
      console.log("ì§€ìš¸ìˆœë²ˆ:", delIdx);

      // 2. ë¡œì»¬ì“°ì²˜ë¦¬í•¨ìˆ˜ í˜¸ì¶œ : call() ëŒ€ë¦¬í˜¸ì¶œ!
      setLS.call({ key: "minfo", opt: "delete", delSeq: delIdx });
    }); //// addEvt ////
  }); ////// forEach /////
} ////// setDelLink í•¨ìˆ˜ ////////////////////////////

////////// ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì²˜ë¦¬ ê³µí†µí•¨ìˆ˜ //////////////
/************************************************* 
  í•¨ìˆ˜ëª… : setLS
  ê¸°ëŠ¥ : ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜
*************************************************/
function setLS() {
  // ì „ë‹¬ë³€ìˆ˜ë¥¼ í•˜ë‚˜ë§Œ ë°›ê³  ê·¸ê°’ì„ ê°ì²´ë¡œ ì •ì˜í•œë‹¤!
  // -> ì´ë ‡ê²Œ í•˜ë©´ í™•ì¥ì„±ì´ ì¢‹ì•„ì§„ë‹¤!
  // -> ì˜ˆì»¨ë° ì§€ìš¸ë•ŒëŠ” ì§€ìš¸ìˆœë²ˆì„ ë” ë³´ë‚´ì•¼í•œë‹¤! ì´ëŸ´ë•Œ ì¢‹ìŒ!
  // ->>> ì „ë‹¬ë³€ìˆ˜ ì—†ì´ ê°ì²´ë¥¼ ë°›ëŠ” ë°©ë²•ì´ ìˆìŒ!!!
  // ë°”ë¡œ call(ê°ì²´) / apply(ê°ì²´) ë¡œ ëŒ€ë¦¬í˜¸ì¶œí•´ì¤Œ!
  // ë°›ì„ë•ŒëŠ” this.ì†ì„±ëª… ìœ¼ë¡œ ë°›ì•„ì¤€ë‹¤!!!

  // ì•„ë˜ ì†ì„±ëª…ì •ì˜! /////////
  // {key:ê°’, opt:ê°’, delIdx:ê°’}
  // -> call(ê°ì²´)ë¡œ í˜¸ì¶œí•˜ë©´ thisë¡œ ë°›ì•„ë¼!
  // this.key - ë¡œì»¬ìŠ¤í† ë¦¬ì§€ í‚¤ëª…
  // this.opt - ì²˜ë¦¬ì˜µì…˜(add/delete/update)
  // this.upSeq - ìˆ˜ì •í• ìˆœë²ˆ
  // this.delSeq - ì§€ìš¸ìˆœë²ˆ
  // -> ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„° ì²˜ë¦¬ëŠ” 4ê°€ì§€ë¥¼ ë§í•œë‹¤!
  // ->>> í¬ë£¨ë“œ!(CRUD) -> Create/Read/Update/Delete

  // [ ë¡œì»¬ì“° ì²˜ë¦¬ ê¸°ë³¸ê³¼ì • ]
  // ë¡œì»¬ì“°ì½ê¸°->ë¡œì»¬ì“°íŒŒì‹±->ë°ì´í„°ë³€ê²½->ë¡œì»¬ì“°ë¬¸ìë³€ê²½í›„ ì—…ë°ì´íŠ¸!

  // 1. ì „ë‹¬ê°’ ë° í˜¸ì¶œí™•ì¸
  console.log("ë¡œì»¬ì“°ì²˜ë¦¬!", this.key);

  // 2. ë¡œì»¬ì“° minfo ë°ì´í„° ì½ì–´ì˜¤ê¸° : ë¬¸ìí˜• ë°ì´í„°ì„!
  let locals = localStorage.getItem(this.key);

  // 3. ë¡œì»¬ì“° minfo íŒŒì‹±í›„ ë°ì´í„° ì²˜ë¦¬í•˜ê¸°
  locals = JSON.parse(locals);
  // ë¬¸ìí˜• ë¡œì»¬ì“°ë¥¼ íŒŒì‹±í•˜ì—¬ ë°°ì—´ê°ì²´ë¡œ ë³€í™˜í•¨!

  console.log('Math.max(1,50,24)',Math.max(1,50,24));
  console.log('locals.map(v=>v.idx)',locals.map(v=>v.idx));

  // 3-1. 'add'ì¼ë•Œ ë°ì´í„° ì¶”ê°€í•˜ê¸° ////
  if (this.opt == "add") {
    locals.push({
      // ê³ ìœ ë²ˆí˜¸ëŠ” ë°ì´í„° ì¤‘ ìµœëŒ€ê°’ì— 1ì„ ë”í•´ì•¼í•¨
      // Math.max(1,50,24) -> ê²°ê³¼ëŠ” 50!
      // Math.max.apply(ë³´ë‚¼ê°ì²´,ë°°ì—´) -> ë³´ë‚¼ê°ì²´ê°€ ì—†ìœ¼ë©´ null
      // -> maxí•˜ìœ„ applyëŠ” ë°°ì—´ê°’ ëŒ€ìƒìœ¼ë¡œ ìµœëŒ€ê°’ì„ ì ìš©í•¨!
      idx: Math.max.apply(null,locals.map(v=>v.idx)) + 1,
      tit: tit.value,
      cont: cont.value,
    });
  } /// if ///

  // 3-2. 'update'ì¼ë•Œ ë°ì´í„° ìˆ˜ì •í•˜ê¸° ////
  else if (this.opt == "update") {
    // íŒŒì‹±ëœ ê°ì²´ê°’ì„ ìˆœíšŒí•˜ì—¬ í•´ë‹¹ìˆœë²ˆidxê°’ê³¼ ì¼ì¹˜ëœ ê°’ì„ ì°¾ì•„ì„œ ì œëª©ê³¼ ë‚´ìš©ì„ ë³€ê²½í•œë‹¤.
    // ìˆœíšŒ ê°€ëŠ¥í•œ ë°°ì—´ë©”ì„œë“œëŠ” ë­ê°€ ìˆì„ê¹Œ?
    // -> forEach() / map() / find() / filter()
    // -> ìœ„ì˜ ë©”ì„œë“œë“¤ì€ ëŒ€ìƒë°°ì—´ì„ ëª¨ë‘ ìˆœíšŒí•˜ê¸° ë•Œë¬¸ì— íš¨ìœ¨ì„±ì´ ë–¨ì–´ì§„ë‹¤

    // -> some() : ì°¾ìœ¼ë©´ ìˆœíšŒë¥¼ ëë‚´ëŠ” ë©”ì„œë“œ

    locals.some( v => { 
      console.log('ë°°ì—´ìˆœíšŒì¤‘');
      if (v.idx == this.upSeq) {
        // ë°ì´í„° ì—…ë°ì´íŠ¸
        v.tit = tit2.value;
        v.cont = cont2.value;
        // ë¦¬í„´ trueí•˜ë©´ some ë©”ì„œë“œ ëë‚´ê¸°
        return true
      } // if //
    }); // some() //
  } /// else if ///

  // 3-3. 'delete'ì¼ë•Œ ë°ì´í„° ì‚­ì œí•˜ê¸° ////
  else if (this.opt == "delete") {
    // ì‚­ì œì²˜ë¦¬ ë°°ì—´í•¨ìˆ˜ : splice(ì§€ìš¸ìˆœë²ˆ,1)
    locals.splice(this.delSeq, 1);
  } /// else if ///

  // 4. ë¡œì»¬ì“° ë³€ê²½ëœ ë°ì´í„° ë‹¤ì‹œ ë„£ê¸° : ë„£ì„ë• ë¬¸ìí™”(stringify)
  localStorage.setItem(this.key, JSON.stringify(locals));

  // 5. ë‹¤ì‹œ ë°ì´í„° ë°”ì¸ë”©í•˜ê¸°
  bindData();
} //////////// setLS í•¨ìˆ˜ //////////////////////

//******************************************** */
///////////////////////////////////////////////
// [ 2. ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ ì—°ìŠµ ] ////////////////////
// 1. ë²„íŠ¼ ê¸°ëŠ¥ ì´ë²¤íŠ¸ ëŒ€ìƒ : .session-box button
const btnSession = myFn.qsa(".session-box button");
console.log("ëŒ€ìƒ:", btnSession);

// 2. ë²„íŠ¼ì— ì´ë²¤íŠ¸ ì„¤ì •í•˜ê¸°
btnSession.forEach((ele) => myFn.addEvt(ele, "click", sessionsFn));

// 3. ì„¸ì…˜ì“° ì²˜ë¦¬ í•¨ìˆ˜ ë§Œë“¤ê¸° ///////
function sessionsFn() {
  // 1. ë²„íŠ¼ í…ìŠ¤íŠ¸ ì½ê¸°
  let btxt = this.innerText;
  console.log("ì„¸ì…˜ì“°~!", btxt);

  // 2. ë²„íŠ¼ë³„ ê¸°ëŠ¥ ë¶„ê¸°í•˜ê¸° //////
  if (btxt == "ì²˜ìŒ") {
    // (1) ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ ì…‹íŒ…í•˜ê¸°
    // -> sessionStorage.setItem(í‚¤,ê°’)
    sessionStorage.setItem("actor-name", "ì •ìš°ì„±");
    sessionStorage.setItem("actor-role", "ê¹€ì •ë„ì—­");
    sessionStorage.setItem("actor-cat", "êµ­ë‚´íŒ€ ì•ˆê¸°ë¶€íŒ€ì¥, ë°•í‰í˜¸ë‘ ì‚¬ì´ë‚˜ì¨");
  } /// if ////
  else if (btxt == "ë³´ì—¬ì¤˜") {
    // ë°°ìš°ì´ë¦„ ì¶œë ¥
    myFn.qs(".session .nm").innerText = sessionStorage.getItem("actor-name");
    // ì—­í• ì´ë¦„ ì¶œë ¥
    myFn.qs(".session .role").innerText = sessionStorage.getItem("actor-role");
    // ìºë¦­í„°ì†Œê°œ ì¶œë ¥
    myFn.qs(".session .cat").innerText = sessionStorage.getItem("actor-cat");
  } /// else if ////
  else if (btxt == "ì „ì²´ì‚­ì œ") {
    // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì „ì²´ ì‚­ì œ
    // í•´ë‹¹ url ìŠ¤í† ë¦¬ì§€ë§Œ ëŒ€ìƒìœ¼ë¡œ ëª¨ë‘ ì§€ì›€
    sessionStorage.clear();

    // ê°œë³„ì‚­ì œëŠ” removeItem(í‚¤)
    // sessionStorage.removeItem("actor-name");
  } //// else if ////
} /////////// sessionsFn //////////

// ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ ê°œë³„ ì‚­ì œ êµ¬í˜„í•˜ê¸° ///////
// ë°°ìš°ì´ë¦„ ì‚­ì œ
myFn.qs(".session .nm").onclick = () => sessionStorage.removeItem("actor-name");
// ì—­í• ì´ë¦„ ì‚­ì œ
myFn.qs(".session .role").onclick = () =>
  sessionStorage.removeItem("actor-role");
// ìºë¦­í„°ì†Œê°œ ì‚­ì œ
myFn.qs(".session .cat").onclick = () => sessionStorage.removeItem("actor-cat");
